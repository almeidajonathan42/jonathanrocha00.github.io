<canvas id="myCanvas" width="800" height="600"> </canvas>

<script>
	
    
    // Direction mapping
    const UP = 0;
    const DOWN = 1;
    const LEFT = 2;
    const RIGHT = 3;
    
    // Key mapping
    const W = 119;
    const S = 115;
    const A = 97;
    const D = 100;
    const SPACE = 32;
    
	let canvas = document.getElementById("myCanvas");
	let c = canvas.getContext("2d");

	let blockSize = 20;
	let particleX, particleY;
	let speed = 1;
    let direction = RIGHT;


	
	init();
	setInterval(update, 1000/10);
	
    
    


    // Handles all user input
    window.addEventListener("keypress", function key() {
        let key = event.keyCode;
        
        // Controls
        if (direction != DOWN && key == W) {
            direction = UP;
        }
        else if (direction != UP && key == S) {
            direction = DOWN;
        }
        else if (direction != LEFT && key == D){
            direction = RIGHT;
        }
        else if (direction != RIGHT && key == A) {
            direction = LEFT;
        }        
    });

	function update() {
		drawGrid();
		moveParticle();
		checkCollision();
		drawParticle();
	}

	function init() {
		let originalRandomNumber = Math.floor(Math.random() * canvas.width);
		let remainder = originalRandomNumber % blockSize;
		particleX = originalRandomNumber - remainder;

		originalRandomNumber = Math.floor(Math.random() * canvas.height);
		remainder = originalRandomNumber % blockSize;
		particleY = originalRandomNumber - remainder;

		c.fillStyle = 'black';
		c.fillRect(0, 0, canvas.width, canvas.height);
	}

	function moveParticle() {
		if (direction == UP) {
            particleY -= blockSize;
        }
        else if (direction == DOWN) {
            particleY += blockSize;
        }
        else if (direction == LEFT) {
            particleX -= blockSize;
        }
        else if (direction == RIGHT) {
            particleX += blockSize;
        }
	}

	function checkCollision() {
		if (particleX >= canvas.width) {
			particleX = 0;
		}
		if (particleY >= canvas.height) {
			particleY = 0;
		}
		if (particleX == 0 + blockSize) {
			particleX = canvas.width;
		}
		if (particleY < 0 + blockSize) {
			particleY = canvas.height;
		}
	}

	function drawParticle() {
		c.fillStyle="white";
		c.fillRect(particleX, particleY, blockSize, blockSize);
	}

	function drawGrid() {
		c.fillStyle = 'rgba(0, 0, 0, .5)';
		c.fillRect(0, 0, canvas.width, canvas.height);

		// Draws vertical lines
		for (let i = 0; i < canvas.width; i = i + blockSize) {
			c.beginPath();
			c.moveTo(i, 0);
			c.lineTo(i, canvas.height);
			c.strokeStyle = '#404040';
	      	c.stroke();
		}
		// Draws horizontal lines
		for (let i = 0; i < canvas.height; i = i + blockSize) {
			c.beginPath();
			c.moveTo(0, i);
			c.lineTo(canvas.width, i);
			c.strokeStyle = '#404040';
	      	c.stroke();
		}
	}

</script>